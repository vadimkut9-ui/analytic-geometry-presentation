<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Аналитическая геометрия - Вариант №9</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="presentation-container">
        <nav class="slide-menu">
            <div class="menu-toggle">
                <i class="fas fa-bars"></i>
            </div>
            <ul class="menu-list">
                <li><a href="#slide1" class="menu-link">Титульный слайд</a></li>
                <li><a href="#slide2" class="menu-link">Определение аналитической геометрии</a></li>
                <li><a href="#slide3" class="menu-link">Основные понятия</a></li>
                <li><a href="#slide4" class="menu-link">Раздел: Уравнения</a></li>
                <li><a href="#slide5" class="menu-link">Общее уравнение прямой</a></li>
                <li><a href="#slide6" class="menu-link">Уравнение через 2 точки</a></li>
                <li><a href="#slide7" class="menu-link">Каноническое уравнение</a></li>
                <li><a href="#slide8" class="menu-link">Параметрическое уравнение</a></li>
                <li><a href="#slide9" class="menu-link">Раздел: Алгоритмы</a></li>
                <li><a href="#slide10" class="menu-link">Общее → Каноническое</a></li>
                <li><a href="#slide11" class="menu-link">Общее → Параметрическое</a></li>
                <li><a href="#slide12" class="menu-link">Каноническое → Общее</a></li>
                <li><a href="#slide13" class="menu-link">Каноническое → Параметрическое</a></li>
                <li><a href="#slide14" class="menu-link">Параметрическое → Каноническое</a></li>
                <li><a href="#slide15" class="menu-link">Параметрическое → Общее</a></li>
                <li><a href="#slide16" class="menu-link">Раздел: Программы</a></li>
                <li><a href="#slide17" class="menu-link">Программа: Конвертер</a></li>
                <li><a href="#slide18" class="menu-link">Программа: Через 2 точки</a></li>
                <li><a href="#slide19" class="menu-link">Исходный код программ</a></li>
                <li><a href="#slide20" class="menu-link">Графики 1</a></li>
                <li><a href="#slide21" class="menu-link">Графики 2</a></li>
                <li><a href="#slide22" class="menu-link">Графики 3</a></li>
                <li><a href="#slide23" class="menu-link">Заключение</a></li>
            </ul>
        </nav>

        <div class="slides-container">
            <!-- ==================== СЛАЙД 1: Титульный слайд ==================== -->
            <section class="slide active" id="slide1">
                <div class="slide-content">
                    <h1 class="title">Аналитическая геометрия</h1>
                    <h2 class="subtitle">Уравнения прямой на плоскости</h2>
                    <div class="student-info">
                        <p>Выполнил: <strong>Кутузов Вадим</strong></p>
                        <p>Вариант №9</p>
                    </div>
                    <div class="math-example">
                        <div id="title-math"></div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 2: Определение аналитической геометрии ==================== -->
            <section class="slide" id="slide2">
                <div class="slide-content">
                    <h1>Определение аналитической геометрии</h1>
                    <div class="definition">
                        <p><strong>Аналитическая геометрия</strong> — раздел математики, в котором геометрические задачи решаются средствами алгебры на основе метода координат.</p>
                        <p>Основная идея: установление соответствия между геометрическими объектами и уравнениями, описывающими их в координатах.</p>
                        <div class="math-block" id="def-math"></div>
                        <p>На плоскости каждая точка определяется парой чисел (x, y), а линии и кривые описываются уравнениями относительно этих координат.</p>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 3: Основные понятия ==================== -->
            <section class="slide" id="slide3">
                <div class="slide-content">
                    <h1>Основные понятия аналитической геометрии</h1>
                    <div class="definition">
                        <h3>Ключевые элементы:</h3>
                        <div class="vector-grid">
                            <div class="vector-item">
                                <div class="vector-title">Декартова система координат</div>
                                <p>Две взаимно перпендикулярные оси X и Y</p>
                                <div class="math-block" id="origin-point"></div>
                            </div>
                            <div class="vector-item">
                                <div class="vector-title">Точка на плоскости</div>
                                <p>Определяется парой чисел</p>
                                <div class="math-block" id="point-formula"></div>
                            </div>
                            <div class="vector-item">
                                <div class="vector-title">Расстояние между точками</div>
                                <p>Длина отрезка между точками</p>
                                <div class="math-block" id="distance-formula"></div>
                            </div>
                            <div class="vector-item">
                                <div class="vector-title">Уравнение линии</div>
                                <p>Зависимость между координатами</p>
                                <div class="math-block" id="line-equation"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 4: Раздел - Уравнения ==================== -->
            <section class="slide divider-slide" id="slide4">
                <div class="slide-content">
                    <h1><i class="fas fa-shapes"></i> Виды уравнений прямой</h1>
                    <p>Различные формы записи уравнения одной и той же прямой</p>
                </div>
            </section>

            <!-- ==================== СЛАЙД 5: Общее уравнение прямой ==================== -->
            <section class="slide" id="slide5">
                <div class="slide-content">
                    <h1>Общее уравнение прямой на плоскости</h1>
                    <div class="equation-description">
                        <p><strong>Общий вид:</strong></p>
                        <div class="math-block" id="general-eq"></div>
                        <p>где A, B, C — действительные числа, причем A и B не равны нулю одновременно.</p>
                        <div class="example">
                            <h3>Пример:</h3>
                            <p>Уравнение прямой</p>
                            <div class="math-block" id="general-example"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 6: Уравнение через 2 точки ==================== -->
            <section class="slide" id="slide6">
                <div class="slide-content">
                    <h1>Уравнение прямой, проходящей через две точки</h1>
                    <div class="equation-description">
                        <p>Если прямая проходит через точки M₁(x₁, y₁) и M₂(x₂, y₂), то ее уравнение:</p>
                        <div class="math-block" id="two-points-eq"></div>
                        <div class="example">
                            <h3>Пример:</h3>
                            <p>Прямая через точки A(1, 2) и B(4, 5):</p>
                            <div class="math-block" id="two-points-example"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 7: Каноническое уравнение ==================== -->
            <section class="slide" id="slide7">
                <div class="slide-content">
                    <h1>Каноническое уравнение прямой</h1>
                    <div class="equation-description">
                        <p><strong>Каноническое уравнение:</strong></p>
                        <div class="math-block" id="canonical-eq"></div>
                        <p>где M₀(x₀, y₀) — точка на прямой, s = (l, m) — направляющий вектор.</p>
                        <div class="example">
                            <h3>Пример:</h3>
                            <p>Через точку M₀(2, 1) с вектором s = (3, 4):</p>
                            <div class="math-block" id="canonical-example"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 8: Параметрическое уравнение ==================== -->
            <section class="slide" id="slide8">
                <div class="slide-content">
                    <h1>Параметрическое уравнение прямой</h1>
                    <div class="equation-description">
                        <p><strong>Параметрическая форма:</strong></p>
                        <div class="math-block" id="parametric-eq"></div>
                        <p>где t — параметр, M₀(x₀, y₀) — точка, s = (l, m) — направляющий вектор.</p>
                        <div class="example">
                            <h3>Пример:</h3>
                            <p>Через точку M₀(1, -1) с вектором s = (2, 3):</p>
                            <div class="math-block" id="parametric-example"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 9: Раздел - Алгоритмы ==================== -->
            <section class="slide divider-slide" id="slide9">
                <div class="slide-content">
                    <h1><i class="fas fa-exchange-alt"></i> Алгоритмы преобразования</h1>
                    <p>Преобразования между различными формами уравнений</p>
                </div>
            </section>

            <!-- ==================== СЛАЙД 10: Общее → Каноническое ==================== -->
            <section class="slide" id="slide10">
                <div class="slide-content">
                    <h1>Из общего уравнения в каноническое</h1>
                    <div class="algorithm">
                        <ol>
                            <li>Найти точку M₀(x₀, y₀) на прямой</li>
                            <li>Направляющий вектор: s = (-B, A)</li>
                            <li>Записать: (x - x₀)/(-B) = (y - y₀)/A</li>
                        </ol>
                        <div class="example">
                            <h3>Пример:</h3>
                            <div class="math-block" id="example10-1"></div>
                            <div class="example-steps">
                                <p>1. При x = 0: y = 2, точка M₀(0, 2)</p>
                                <p>2. s = (3, 2)</p>
                                <p>3. <div class="math-block" id="example10-2"></div></p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 11: Общее → Параметрическое ==================== -->
            <section class="slide" id="slide11">
                <div class="slide-content">
                    <h1>Из общего уравнения в параметрическое</h1>
                    <div class="algorithm">
                        <ol>
                            <li>Найти точку M₀(x₀, y₀)</li>
                            <li>Направляющий вектор: s = (-B, A)</li>
                            <li>Записать: x = x₀ - Bt, y = y₀ + At</li>
                        </ol>
                        <div class="example">
                            <h3>Пример:</h3>
                            <div class="math-block" id="example11-1"></div>
                            <div class="example-steps">
                                <p>1. Точка M₀(0, 2)</p>
                                <p>2. s = (3, 2)</p>
                                <p>3. <div class="math-block" id="example11-2"></div></p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 12: Каноническое → Общее ==================== -->
            <section class="slide" id="slide12">
                <div class="slide-content">
                    <h1>Из канонического в общее уравнение</h1>
                    <div class="algorithm">
                        <ol>
                            <li>Из (x - x₀)/l = (y - y₀)/m перейти к m(x - x₀) = l(y - y₀)</li>
                            <li>Раскрыть скобки</li>
                            <li>Перенести все члены в одну сторону</li>
                        </ol>
                        <div class="example">
                            <h3>Пример:</h3>
                            <div class="math-block" id="example12-1"></div>
                            <div class="example-steps">
                                <p>1. <div class="math-block" id="example12-2"></div></p>
                                <p>2. <div class="math-block" id="example12-3"></div></p>
                                <p>3. <div class="math-block" id="example12-4"></div></p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 13: Каноническое → Параметрическое ==================== -->
            <section class="slide" id="slide13">
                <div class="slide-content">
                    <h1>Из канонического в параметрическое</h1>
                    <div class="algorithm">
                        <ol>
                            <li>Приравнять каждую дробь к параметру t</li>
                            <li>Выразить x и y через t</li>
                        </ol>
                        <div class="example">
                            <h3>Пример:</h3>
                            <div class="math-block" id="example13-1"></div>
                            <div class="example-steps">
                                <p>1. (x - 2)/3 = t, (y - 1)/4 = t</p>
                                <p>2. <div class="math-block" id="example13-2"></div></p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 14: Параметрическое → Каноническое ==================== -->
            <section class="slide" id="slide14">
                <div class="slide-content">
                    <h1>Из параметрического в каноническое</h1>
                    <div class="algorithm">
                        <ol>
                            <li>Выразить t из каждого уравнения</li>
                            <li>Приравнять выражения для t</li>
                        </ol>
                        <div class="example">
                            <h3>Пример:</h3>
                            <div class="math-block" id="example14-1"></div>
                            <div class="example-steps">
                                <p>1. t = (x - 1)/2, t = (y + 1)/3</p>
                                <p>2. <div class="math-block" id="example14-2"></div></p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 15: Параметрическое → Общее ==================== -->
            <section class="slide" id="slide15">
                <div class="slide-content">
                    <h1>Из параметрического в общее уравнение</h1>
                    <div class="algorithm">
                        <ol>
                            <li>Выразить t из первого уравнения</li>
                            <li>Подставить во второе уравнение</li>
                            <li>Преобразовать к виду Ax + By + C = 0</li>
                        </ol>
                        <div class="example">
                            <h3>Пример:</h3>
                            <div class="math-block" id="example15-1"></div>
                            <div class="example-steps">
                                <p>1. t = (x - 1)/2</p>
                                <p>2. y = -1 + 3·(x - 1)/2</p>
                                <p>3. <div class="math-block" id="example15-2"></div></p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 16: Раздел - Программы ==================== -->
            <section class="slide divider-slide" id="slide16">
                <div class="slide-content">
                    <h1><i class="fas fa-code"></i> Программная реализация</h1>
                    <p>JavaScript программы для преобразования уравнений</p>
                </div>
            </section>

            <!-- ==================== СЛАЙД 17: Программа: Конвертер ==================== -->
            <section class="slide" id="slide17">
                <div class="slide-content">
                    <h1>Программа: Конвертер уравнений</h1>
                    <div class="converter-app">
                        <div class="converter-container">
                            <div class="input-section">
                                <h3>Исходное уравнение</h3>
                                <div class="input-group">
                                    <label>Тип уравнения:</label>
                                    <select id="source-type">
                                        <option value="general">Общее: Ax + By + C = 0</option>
                                        <option value="canonical">Каноническое: (x-x₀)/l = (y-y₀)/m</option>
                                        <option value="parametric">Параметрическое: x=x₀+lt, y=y₀+mt</option>
                                    </select>
                                </div>
                                
                                <div id="general-inputs" class="inputs-group">
                                    <div class="input-row">
                                        <label>A:</label>
                                        <input type="number" id="input-A" value="2" step="any">
                                        <label>B:</label>
                                        <input type="number" id="input-B" value="-3" step="any">
                                        <label>C:</label>
                                        <input type="number" id="input-C" value="6" step="any">
                                    </div>
                                </div>
                                
                                <div id="canonical-inputs" class="inputs-group" style="display:none;">
                                    <div class="input-row">
                                        <label>x₀:</label>
                                        <input type="number" id="input-x0" value="0" step="any">
                                        <label>y₀:</label>
                                        <input type="number" id="input-y0" value="2" step="any">
                                        <label>l:</label>
                                        <input type="number" id="input-l" value="3" step="any">
                                        <label>m:</label>
                                        <input type="number" id="input-m" value="2" step="any">
                                    </div>
                                </div>
                                
                                <div id="parametric-inputs" class="inputs-group" style="display:none;">
                                    <div class="input-row">
                                        <label>x₀:</label>
                                        <input type="number" id="param-x0" value="1" step="any">
                                        <label>y₀:</label>
                                        <input type="number" id="param-y0" value="-1" step="any">
                                        <label>l:</label>
                                        <input type="number" id="param-l" value="2" step="any">
                                        <label>m:</label>
                                        <input type="number" id="param-m" value="3" step="any">
                                    </div>
                                </div>
                                
                                <div class="input-group">
                                    <label>Преобразовать в:</label>
                                    <select id="target-type">
                                        <option value="general">Общее уравнение</option>
                                        <option value="canonical">Каноническое уравнение</option>
                                        <option value="parametric">Параметрическое уравнение</option>
                                    </select>
                                </div>
                                
                                <button id="convert-btn" class="convert-button">
                                    <i class="fas fa-exchange-alt"></i> Преобразовать
                                </button>
                            </div>
                            
                            <div class="output-section">
                                <h3>Результат преобразования</h3>
                                <div class="equation-display" id="source-equation"></div>
                                <div class="arrow">
                                    <i class="fas fa-arrow-down"></i>
                                </div>
                                <div class="equation-display" id="result-equation"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 18: Программа: Через 2 точки ==================== -->
            <section class="slide" id="slide18">
                <div class="slide-content">
                    <h1>Программа: Уравнение через 2 точки</h1>
                    <div class="two-points-app">
                        <div class="app-container">
                            <div class="input-section">
                                <h3>Введите координаты двух точек</h3>
                                <div class="point-input">
                                    <div class="point">
                                        <h4>Точка A</h4>
                                        <div class="coord-input">
                                            <label>x₁:</label>
                                            <input type="number" id="point1-x" value="1" step="any">
                                            <label>y₁:</label>
                                            <input type="number" id="point1-y" value="2" step="any">
                                        </div>
                                    </div>
                                    <div class="point">
                                        <h4>Точка B</h4>
                                        <div class="coord-input">
                                            <label>x₂:</label>
                                            <input type="number" id="point2-x" value="4" step="any">
                                            <label>y₂:</label>
                                            <input type="number" id="point2-y" value="5" step="any">
                                        </div>
                                    </div>
                                </div>
                                <button id="calculate-line" class="calculate-button">
                                    <i class="fas fa-calculator"></i> Найти уравнение
                                </button>
                            </div>
                            
                            <div class="results-section">
                                <h3>Уравнение прямой</h3>
                                <div class="equation-forms">
                                    <div class="form-type">Общее уравнение:</div>
                                    <div id="general-form"></div>
                                    <div class="form-type">Каноническое уравнение:</div>
                                    <div id="canonical-form"></div>
                                    <div class="form-type">Параметрическое уравнение:</div>
                                    <div id="parametric-form"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 19: Исходный код программ ==================== -->
            <section class="slide" id="slide19">
                <div class="slide-content">
                    <h1>Исходный код программ</h1>
                    <div class="source-code">
                        <div class="code-tabs">
                            <button class="code-tab active" data-tab="converter">Конвертер уравнений</button>
                            <button class="code-tab" data-tab="two-points">Через 2 точки</button>
                        </div>
                        <div class="code-content">
                            <pre id="converter-code" class="code-block active"><code>function generalToCanonical(A, B, C) {
    let x0, y0;
    if (Math.abs(A) > 0.0001) {
        y0 = 0;
        x0 = -C / A;
    } else {
        x0 = 0;
        y0 = -C / B;
    }
    
    let l = B;
    let m = -A;
    
    let gcdVal = gcd(l, m);
    if (Math.abs(gcdVal) > 0.0001) {
        l /= gcdVal;
        m /= gcdVal;
    }
    
    return {x0, y0, l, m};
}</code></pre>
                            <pre id="two-points-code" class="code-block"><code>function lineThroughTwoPoints(x1, y1, x2, y2) {
    if (Math.abs(x1 - x2) < 0.001 && 
        Math.abs(y1 - y2) < 0.001) {
        throw new Error("Точки совпадают");
    }
    
    let A = y2 - y1;
    let B = x1 - x2;
    let C = x2 * y1 - x1 * y2;
    
    return {
        general: {A, B, C},
        canonical: {
            x0: x1,
            y0: y1,
            l: x2 - x1,
            m: y2 - y1
        },
        parametric: {
            x0: x1,
            y0: y1,
            l: x2 - x1,
            m: y2 - y1
        }
    };
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 20: Графики 1 ==================== -->
            <section class="slide image-slide" id="slide20">
                <div class="slide-content">
                    <div class="image-container">
                        <div class="image-placeholder">
                            <i class="fas fa-chart-line"></i>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 21: Графики 2 ==================== -->
            <section class="slide image-slide" id="slide21">
                <div class="slide-content">
                    <div class="image-container">
                        <div class="image-placeholder">
                            <i class="fas fa-drafting-compass"></i>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 22: Графики 3 ==================== -->
            <section class="slide image-slide" id="slide22">
                <div class="slide-content">
                    <div class="image-container">
                        <div class="image-placeholder">
                            <i class="fas fa-project-diagram"></i>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== СЛАЙД 23: Заключение ==================== -->
            <section class="slide" id="slide23">
                <div class="slide-content">
                    <h1>Заключение</h1>
                    <div class="conclusion">
                        <div class="summary">
                            <h3>Итоги изучения:</h3>
                            <ul>
                                <li>Прямая может быть представлена в различных формах</li>
                                <li>Все формы эквивалентны и преобразуемы</li>
                                <li>Каждая форма удобна для определенных задач</li>
                                <li>Аналитическая геометрия связывает алгебру и геометрию</li>
                            </ul>
                        </div>
                        <div class="final-message">
                            <p><strong>Аналитическая геометрия</strong> продолжает оставаться фундаментальным инструментом в математике.</p>
                            <div class="thank-you">
                                <p>Спасибо за внимание!</p>
                                <p><strong>Кутузов Вадим</strong></p>
                                <p>Вариант №9</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <div class="navigation">
            <button id="prev-btn" class="nav-btn" title="Предыдущий слайд">
                <i class="fas fa-chevron-left"></i>
            </button>
            <div class="slide-counter">
                <span id="current-slide">1</span> / <span id="total-slides">23</span>
            </div>
            <button id="next-btn" class="nav-btn" title="Следующий слайд">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    initMenu();
    initSlideNavigation();
    initConverter();
    initTwoPointsApp();
    initCodeTabs();
    
    if (typeof katex !== 'undefined') {
        setTimeout(renderMath, 300);
    }
});

function initMenu() {
    const menuToggle = document.querySelector('.menu-toggle');
    const slideMenu = document.querySelector('.slide-menu');
    const slidesContainer = document.querySelector('.slides-container');
    const menuLinks = document.querySelectorAll('.menu-link');
    
    if (!menuToggle || !slideMenu || !slidesContainer) return;
    
    menuToggle.addEventListener('click', function() {
        const isActive = slideMenu.classList.toggle('active');
        slidesContainer.classList.toggle('menu-open');
        menuToggle.innerHTML = isActive ? '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
    });
    
    menuLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            slideMenu.classList.remove('active');
            slidesContainer.classList.remove('menu-open');
            menuToggle.innerHTML = '<i class="fas fa-bars"></i>';
        });
    });
}

function initSlideNavigation() {
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;
    const currentSlideElement = document.getElementById('current-slide');
    const totalSlidesElement = document.getElementById('total-slides');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const menuLinks = document.querySelectorAll('.menu-link');
    
    if (slides.length === 0) return;
    
    let currentSlideIndex = 0;
    let isAnimating = false;
    
    if (totalSlidesElement) totalSlidesElement.textContent = totalSlides;
    
    function showSlide(index, direction = 'next') {
        if (isAnimating) return;
        if (index < 0) index = 0;
        if (index >= totalSlides) index = totalSlides - 1;
        if (index === currentSlideIndex) return;
        
        isAnimating = true;
        const currentSlide = slides[currentSlideIndex];
        const nextSlide = slides[index];
        
        const actualDirection = index > currentSlideIndex ? 'next' : 'prev';
        
        currentSlide.classList.remove('active');
        currentSlide.classList.add(actualDirection);
        
        nextSlide.classList.add('active');
        nextSlide.style.transform = actualDirection === 'next' ? 'translateX(100%)' : 'translateX(-100%)';
        
        setTimeout(() => {
            nextSlide.style.transform = 'translateX(0)';
        }, 10);
        
        setTimeout(() => {
            currentSlide.classList.remove('prev', 'next');
            currentSlideIndex = index;
            
            if (currentSlideElement) currentSlideElement.textContent = index + 1;
            
            menuLinks.forEach(link => link.classList.remove('active'));
            if (menuLinks[index]) menuLinks[index].classList.add('active');
            
            isAnimating = false;
        }, 600);
    }
    
    if (prevBtn) prevBtn.addEventListener('click', function() {
        showSlide(currentSlideIndex - 1, 'prev');
    });
    
    if (nextBtn) nextBtn.addEventListener('click', function() {
        showSlide(currentSlideIndex + 1, 'next');
    });
    
    document.addEventListener('keydown', function(e) {
        if (e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT' || e.target.tagName === 'TEXTAREA') return;
        if (isAnimating) return;
        
        switch(e.key) {
            case 'ArrowLeft':
            case 'PageUp':
                e.preventDefault();
                showSlide(currentSlideIndex - 1, 'prev');
                break;
            case 'ArrowRight':
            case 'PageDown':
            case ' ':
                e.preventDefault();
                showSlide(currentSlideIndex + 1, 'next');
                break;
            case 'Home':
                e.preventDefault();
                showSlide(0);
                break;
            case 'End':
                e.preventDefault();
                showSlide(totalSlides - 1);
                break;
        }
    });
    
    menuLinks.forEach((link, index) => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const direction = index > currentSlideIndex ? 'next' : 'prev';
            showSlide(index, direction);
        });
    });
    
    slides[currentSlideIndex].classList.add('active');
    if (menuLinks[currentSlideIndex]) menuLinks[currentSlideIndex].classList.add('active');
    if (currentSlideElement) currentSlideElement.textContent = '1';
}

function initConverter() {
    const sourceType = document.getElementById('source-type');
    const targetType = document.getElementById('target-type');
    const convertBtn = document.getElementById('convert-btn');
    
    if (!sourceType || !convertBtn) return;
    
    sourceType.addEventListener('change', updateInputVisibility);
    targetType.addEventListener('change', performConversion);
    
    const inputs = document.querySelectorAll('#general-inputs input, #canonical-inputs input, #parametric-inputs input');
    inputs.forEach(input => input.addEventListener('input', performConversion));
    
    convertBtn.addEventListener('click', performConversion);
    
    function updateInputVisibility() {
        const generalInputs = document.getElementById('general-inputs');
        const canonicalInputs = document.getElementById('canonical-inputs');
        const parametricInputs = document.getElementById('parametric-inputs');
        
        if (generalInputs) generalInputs.style.display = 'none';
        if (canonicalInputs) canonicalInputs.style.display = 'none';
        if (parametricInputs) parametricInputs.style.display = 'none';
        
        if (sourceType.value === 'general' && generalInputs) generalInputs.style.display = 'block';
        else if (sourceType.value === 'canonical' && canonicalInputs) canonicalInputs.style.display = 'block';
        else if (sourceType.value === 'parametric' && parametricInputs) parametricInputs.style.display = 'block';
        
        updateSourceEquation();
        performConversion();
    }
    
    function updateSourceEquation() {
        const sourceEqElement = document.getElementById('source-equation');
        if (!sourceEqElement) return;
        
        let equation = '';
        let displayMode = false;
        
        if (sourceType.value === 'general') {
            const A = parseFloat(document.getElementById('input-A')?.value) || 0;
            const B = parseFloat(document.getElementById('input-B')?.value) || 0;
            const C = parseFloat(document.getElementById('input-C')?.value) || 0;
            equation = `${formatCoefficient(A)}x ${formatSignedCoefficient(B)}y ${formatSignedCoefficient(C)} = 0`;
        } else if (sourceType.value === 'canonical') {
            const x0 = parseFloat(document.getElementById('input-x0')?.value) || 0;
            const y0 = parseFloat(document.getElementById('input-y0')?.value) || 0;
            const l = parseFloat(document.getElementById('input-l')?.value) || 1;
            const m = parseFloat(document.getElementById('input-m')?.value) || 1;
            
            if (Math.abs(l) < 0.001 && Math.abs(m) < 0.001) equation = "Нулевой вектор";
            else if (Math.abs(l) < 0.001) equation = `x = ${x0}`;
            else if (Math.abs(m) < 0.001) equation = `y = ${y0}`;
            else equation = `\\frac{x - ${formatNumber(x0)}}{${formatNumber(l)}} = \\frac{y - ${formatNumber(y0)}}{${formatNumber(m)}}`;
        } else if (sourceType.value === 'parametric') {
            const x0 = parseFloat(document.getElementById('param-x0')?.value) || 0;
            const y0 = parseFloat(document.getElementById('param-y0')?.value) || 0;
            const l = parseFloat(document.getElementById('param-l')?.value) || 1;
            const m = parseFloat(document.getElementById('param-m')?.value) || 1;
            equation = `\\begin{cases} x = ${formatNumber(x0)} ${formatSignedNumber(l)}t \\\\ y = ${formatNumber(y0)} ${formatSignedNumber(m)}t \\end{cases}`;
            displayMode = true;
        }
        
        try {
            sourceEqElement.innerHTML = '';
            katex.render(equation, sourceEqElement, { throwOnError: false, displayMode: displayMode });
        } catch (e) {
            sourceEqElement.textContent = equation;
        }
    }
    
    function performConversion() {
        const sourceTypeVal = sourceType.value;
        const targetTypeVal = targetType.value;
        const resultEqElement = document.getElementById('result-equation');
        if (!resultEqElement) return;
        
        let result = '';
        let displayMode = false;
        
        try {
            if (sourceTypeVal === targetTypeVal) {
                result = "Исходное и целевое уравнения совпадают";
            } else if (sourceTypeVal === 'general' && targetTypeVal === 'canonical') {
                const A = parseFloat(document.getElementById('input-A')?.value) || 0;
                const B = parseFloat(document.getElementById('input-B')?.value) || 0;
                const C = parseFloat(document.getElementById('input-C')?.value) || 0;
                
                if (Math.abs(A) < 0.0001 && Math.abs(B) < 0.0001) {
                    result = "A и B не могут быть одновременно нулями";
                } else {
                    let x0, y0;
                    if (Math.abs(B) > 0.0001) { x0 = 0; y0 = -C / B; } 
                    else { y0 = 0; x0 = -C / A; }
                    
                    let l = -B;
                    let m = A;
                    let gcdVal = gcd(Math.abs(l), Math.abs(m));
                    if (gcdVal > 0.0001) { l /= gcdVal; m /= gcdVal; }
                    
                    if (Math.abs(l) < 0.001 && Math.abs(m) < 0.001) result = "Нулевой вектор";
                    else if (Math.abs(l) < 0.001) result = `x = ${formatNumber(x0)}`;
                    else if (Math.abs(m) < 0.001) result = `y = ${formatNumber(y0)}`;
                    else result = `\\frac{x - ${formatNumber(x0)}}{${formatNumber(l)}} = \\frac{y - ${formatNumber(y0)}}{${formatNumber(m)}}`;
                }
            } else if (sourceTypeVal === 'general' && targetTypeVal === 'parametric') {
                const A = parseFloat(document.getElementById('input-A')?.value) || 0;
                const B = parseFloat(document.getElementById('input-B')?.value) || 0;
                const C = parseFloat(document.getElementById('input-C')?.value) || 0;
                
                if (Math.abs(A) < 0.0001 && Math.abs(B) < 0.0001) {
                    result = "A и B не могут быть одновременно нулями";
                } else {
                    let x0, y0;
                    if (Math.abs(B) > 0.0001) { x0 = 0; y0 = -C / B; } 
                    else { y0 = 0; x0 = -C / A; }
                    
                    let l = -B;
                    let m = A;
                    let gcdVal = gcd(Math.abs(l), Math.abs(m));
                    if (gcdVal > 0.0001) { l /= gcdVal; m /= gcdVal; }
                    
                    result = `\\begin{cases} x = ${formatNumber(x0)} ${formatSignedNumber(l)}t \\\\ y = ${formatNumber(y0)} ${formatSignedNumber(m)}t \\end{cases}`;
                    displayMode = true;
                }
            } else if (sourceTypeVal === 'canonical' && targetTypeVal === 'general') {
                const x0 = parseFloat(document.getElementById('input-x0')?.value) || 0;
                const y0 = parseFloat(document.getElementById('input-y0')?.value) || 0;
                const l = parseFloat(document.getElementById('input-l')?.value) || 1;
                const m = parseFloat(document.getElementById('input-m')?.value) || 1;
                
                if (Math.abs(l) < 0.001 && Math.abs(m) < 0.001) {
                    result = "Нулевой вектор";
                } else {
                    const A = m;
                    const B = -l;
                    const C = l*y0 - m*x0;
                    result = `${formatCoefficient(A)}x ${formatSignedCoefficient(B)}y ${formatSignedCoefficient(C)} = 0`;
                }
            } else if (sourceTypeVal === 'canonical' && targetTypeVal === 'parametric') {
                const x0 = parseFloat(document.getElementById('input-x0')?.value) || 0;
                const y0 = parseFloat(document.getElementById('input-y0')?.value) || 0;
                const l = parseFloat(document.getElementById('input-l')?.value) || 1;
                const m = parseFloat(document.getElementById('input-m')?.value) || 1;
                
                if (Math.abs(l) < 0.001 && Math.abs(m) < 0.001) result = "Нулевой вектор";
                else { result = `\\begin{cases} x = ${formatNumber(x0)} ${formatSignedNumber(l)}t \\\\ y = ${formatNumber(y0)} ${formatSignedNumber(m)}t \\end{cases}`; displayMode = true; }
            } else if (sourceTypeVal === 'parametric' && targetTypeVal === 'canonical') {
                const x0 = parseFloat(document.getElementById('param-x0')?.value) || 0;
                const y0 = parseFloat(document.getElementById('param-y0')?.value) || 0;
                const l = parseFloat(document.getElementById('param-l')?.value) || 1;
                const m = parseFloat(document.getElementById('param-m')?.value) || 1;
                
                if (Math.abs(l) < 0.001 && Math.abs(m) < 0.001) result = "Нулевой вектор";
                else if (Math.abs(l) < 0.001) result = `x = ${formatNumber(x0)}`;
                else if (Math.abs(m) < 0.001) result = `y = ${formatNumber(y0)}`;
                else result = `\\frac{x - ${formatNumber(x0)}}{${formatNumber(l)}} = \\frac{y - ${formatNumber(y0)}}{${formatNumber(m)}}`;
            } else if (sourceTypeVal === 'parametric' && targetTypeVal === 'general') {
                const x0 = parseFloat(document.getElementById('param-x0')?.value) || 0;
                const y0 = parseFloat(document.getElementById('param-y0')?.value) || 0;
                const l = parseFloat(document.getElementById('param-l')?.value) || 1;
                const m = parseFloat(document.getElementById('param-m')?.value) || 1;
                
                if (Math.abs(l) < 0.001 && Math.abs(m) < 0.001) result = "Нулевой вектор";
                else {
                    const A = m;
                    const B = -l;
                    const C = l*y0 - m*x0;
                    result = `${formatCoefficient(A)}x ${formatSignedCoefficient(B)}y ${formatSignedCoefficient(C)} = 0`;
                }
            }
            
            resultEqElement.innerHTML = '';
            try {
                katex.render(result, resultEqElement, { throwOnError: false, displayMode: displayMode });
            } catch (e) {
                resultEqElement.textContent = result;
            }
        } catch (error) {
            resultEqElement.textContent = "Ошибка преобразования";
        }
    }
    
    updateInputVisibility();
}

function initTwoPointsApp() {
    const calculateBtn = document.getElementById('calculate-line');
    if (!calculateBtn) return;
    
    calculateBtn.addEventListener('click', calculateLineEquation);
    
    ['point1-x', 'point1-y', 'point2-x', 'point2-y'].forEach(id => {
        const input = document.getElementById(id);
        if (input) input.addEventListener('input', calculateLineEquation);
    });
    
    calculateLineEquation();
}

function calculateLineEquation() {
    try {
        const x1 = parseFloat(document.getElementById('point1-x')?.value) || 0;
        const y1 = parseFloat(document.getElementById('point1-y')?.value) || 0;
        const x2 = parseFloat(document.getElementById('point2-x')?.value) || 0;
        const y2 = parseFloat(document.getElementById('point2-y')?.value) || 0;
        
        if (Math.abs(x1 - x2) < 0.001 && Math.abs(y1 - y2) < 0.001) throw new Error("Точки совпадают");
        
        const A = y2 - y1;
        const B = x1 - x2;
        const C = x2 * y1 - x1 * y2;
        
        const generalFormElement = document.getElementById('general-form');
        if (generalFormElement) {
            const generalEq = `${formatCoefficient(A)}x ${formatSignedCoefficient(B)}y ${formatSignedCoefficient(C)} = 0`;
            generalFormElement.innerHTML = '';
            try {
                katex.render(generalEq, generalFormElement, { throwOnError: false });
            } catch (e) {
                generalFormElement.textContent = generalEq;
            }
        }
        
        const canonicalFormElement = document.getElementById('canonical-form');
        if (canonicalFormElement) {
            const l = x2 - x1;
            const m = y2 - y1;
            let canonicalEq;
            
            if (Math.abs(l) < 0.001 && Math.abs(m) < 0.001) canonicalEq = "Точки совпадают";
            else if (Math.abs(l) < 0.001) canonicalEq = `x = ${x1}`;
            else if (Math.abs(m) < 0.001) canonicalEq = `y = ${y1}`;
            else canonicalEq = `\\frac{x - ${formatNumber(x1)}}{${formatNumber(l)}} = \\frac{y - ${formatNumber(y1)}}{${formatNumber(m)}}`;
            
            canonicalFormElement.innerHTML = '';
            try {
                katex.render(canonicalEq, canonicalFormElement, { throwOnError: false });
            } catch (e) {
                canonicalFormElement.textContent = canonicalEq;
            }
        }
        
        const parametricFormElement = document.getElementById('parametric-form');
        if (parametricFormElement) {
            const l = x2 - x1;
            const m = y2 - y1;
            let parametricEq;
            
            if (Math.abs(l) < 0.001 && Math.abs(m) < 0.001) parametricEq = "Точки совпадают";
            else parametricEq = `\\begin{cases} x = ${formatNumber(x1)} ${formatSignedNumber(l)}t \\\\ y = ${formatNumber(y1)} ${formatSignedNumber(m)}t \\end{cases}`;
            
            parametricFormElement.innerHTML = '';
            try {
                katex.render(parametricEq, parametricFormElement, { throwOnError: false, displayMode: true });
            } catch (e) {
                parametricFormElement.textContent = parametricEq;
            }
        }
    } catch (error) {
        const generalFormElement = document.getElementById('general-form');
        if (generalFormElement) generalFormElement.textContent = "Ошибка";
        const canonicalFormElement = document.getElementById('canonical-form');
        if (canonicalFormElement) canonicalFormElement.textContent = "";
        const parametricFormElement = document.getElementById('parametric-form');
        if (parametricFormElement) parametricFormElement.textContent = "";
    }
}

function initCodeTabs() {
    const codeTabs = document.querySelectorAll('.code-tab');
    if (codeTabs.length === 0) return;
    
    codeTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const tabId = this.getAttribute('data-tab');
            codeTabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            document.querySelectorAll('.code-block').forEach(block => block.classList.remove('active'));
            const targetBlock = document.getElementById(`${tabId}-code`);
            if (targetBlock) targetBlock.classList.add('active');
        });
    });
}

function renderMath() {
    try {
        const render = (id, content, displayMode = false) => {
            const element = document.getElementById(id);
            if (element) katex.render(content, element, { throwOnError: false, displayMode });
        };
        
        render('title-math', "Ax + By + C = 0");
        render('def-math', "F(x, y) = 0");
        render('origin-point', "O(0,0)");
        render('point-formula', "M(x, y)");
        render('distance-formula', "d = \\sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}");
        render('line-equation', "F(x, y) = 0");
        render('general-eq', "Ax + By + C = 0");
        render('general-example', "2x - 3y + 6 = 0");
        render('two-points-eq', "\\frac{x - x_1}{x_2 - x_1} = \\frac{y - y_1}{y_2 - y_1}");
        render('two-points-example', "\\frac{x - 1}{3} = \\frac{y - 2}{3}");
        render('canonical-eq', "\\frac{x - x_0}{l} = \\frac{y - y_0}{m}");
        render('canonical-example', "\\frac{x - 2}{3} = \\frac{y - 1}{4}");
        render('parametric-eq', "\\begin{cases} x = x_0 + lt \\\\ y = y_0 + mt \\end{cases}, t \\in \\mathbb{R}", true);
        render('parametric-example', "\\begin{cases} x = 1 + 2t \\\\ y = -1 + 3t \\end{cases}, t \\in \\mathbb{R}", true);
        render('example10-1', "2x - 3y + 6 = 0");
        render('example10-2', "\\frac{x}{3} = \\frac{y - 2}{2}");
        render('example11-1', "2x - 3y + 6 = 0");
        render('example11-2', "\\begin{cases} x = 3t \\\\ y = 2 + 2t \\end{cases}", true);
        render('example12-1', "\\frac{x - 2}{3} = \\frac{y - 1}{4}");
        render('example12-2', "4(x - 2) = 3(y - 1)");
        render('example12-3', "4x - 8 = 3y - 3");
        render('example12-4', "4x - 3y - 5 = 0");
        render('example13-1', "\\frac{x - 2}{3} = \\frac{y - 1}{4}");
        render('example13-2', "\\begin{cases} x = 2 + 3t \\\\ y = 1 + 4t \\end{cases}", true);
        render('example14-1', "\\begin{cases} x = 1 + 2t \\\\ y = -1 + 3t \\end{cases}", true);
        render('example14-2', "\\frac{x - 1}{2} = \\frac{y + 1}{3}");
        render('example15-1', "\\begin{cases} x = 1 + 2t \\\\ y = -1 + 3t \\end{cases}", true);
        render('example15-2', "3x - 2y - 5 = 0");
    } catch (error) {}
}

function formatNumber(num) {
    if (Math.abs(num) < 0.0001) return "0";
    if (Math.abs(num - Math.round(num)) < 0.0001) return Math.round(num).toString();
    return parseFloat(num.toFixed(2)).toString();
}

function formatSignedNumber(num) {
    if (num >= 0) return `+ ${formatNumber(num)}`;
    return `- ${formatNumber(Math.abs(num))}`;
}

function formatCoefficient(num) {
    if (Math.abs(num - 1) < 0.0001) return "";
    if (Math.abs(num + 1) < 0.0001) return "-";
    return formatNumber(num);
}

function formatSignedCoefficient(num) {
    if (num >= 0) return `+ ${formatCoefficient(num)}`;
    return `- ${formatCoefficient(Math.abs(num))}`;
}

function gcd(a, b) {
    a = Math.abs(a);
    b = Math.abs(b);
    
    if (a < 0.0001 && b < 0.0001) return 1;
    if (a < 0.0001) return b;
    if (b < 0.0001) return a;
    
    while (Math.abs(b) > 0.0001) {
        const temp = b;
        b = a % b;
        a = temp;
    }
    return a;
}
    </script>
</body>
</html>
